$(document).ready(function(){$("#map > svg").height(.83*$("#map > svg").width()),$.getJSON("https://raw.githubusercontent.com/iblancasa/GitHub-DataProcessed-Spain/master/languagesProvince.json",function(data){var languagesCities={},ceuta_melilla={};for(i=0;i<data.length;i++)if(void 0!=regions[data[i][0][0]]&&"Ceuta"!=data[i][0]&&"Melilla"!=data[i][0][0]){var high_language,languages=data[i][1],number=0;for(language in languages)languages[language][1]>number&&""!=languages[language][0]&&(number=languages[language][1],high_language=languages[language][0]);void 0==languagesCities[high_language]&&(languagesCities[high_language]=[]),languagesCities[high_language].push(data[i][0][0])}else if("Ceuta"==data[i][0][0]||"Melilla"==data[i][0][0])for(lang in data[i][1])ceuta_melilla[data[i][1][lang][0]]=data[i][1][lang][0];var high_language,number=0;for(language in ceuta_melilla)ceuta_melilla[language]>number&&""!=language&&(number=ceuta_melilla[language],high_language=language);void 0==languagesCities[high_language]&&(languagesCities[high_language]=[]),languagesCities[high_language].push("Ceuta y Melilla");var letters="0123456789ABCDEF".split(""),color="#";for(var language in languagesCities){for(var i=0;6>i;i++)color+=letters[Math.floor(16*Math.random())];for(i=0;i<languagesCities[language].length;i++)regions[languagesCities[language][i]].node.setAttribute("fill",color);$("#leyend").append("<tr><td bgcolor="+color+"></td><td>"+language+"</td></tr>"),color="#"}$("#leyend").append("<tr><td bgcolor='#ffffff'></td><td>Without data</td></tr>")})});