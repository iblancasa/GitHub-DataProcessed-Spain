
<!DOCTYPE HTML>
<!--
	Strata by HTML5 UP
	html5up.net | @n33co
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>


<title> Contributions in week - GitHub Processed Data Ranking </title>



		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="assets/css/min.css">
		<!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
	</head>
	<body id="top">

		<!-- Header -->
			<header id="header">
				<a href="/" class="image avatar"><img src="images/avatar.png" alt="" /></a>
				<h1>GitHub Processed Data Ranking</h1>
			</header>

		<!-- Main -->
			<div id="main">


<h1>Number of new contributions in each province of Spain</h1>

<p>This chart shows the top 5 provinces in number of new contributions</p>

<canvas id="char" style="width:60%;" height="400"></canvas>

<h2>Legend</h2>

<table id="legend" style="width:60%; margin: 0 auto;">
</table>



<h2>Ranking of total contributions</h2>
<table id="contributions">
  <thead>
    <tr>
      <th>Position</th>
      <th>City</th>
      <th>Total contributions</th>
    </tr>
  </thead>
</table>


<h2>How it was calculated?</h2>
<p>When I calculed <a href="totalcontributions.html">total contributions</a>, I calculed differences
between the different dates.</p>

<h2>Data</h2>
<ul class="actions">
	<li><a href="https://github.com/iblancasa/GitHub-DataProcessed-Spain/blob/master/contributionsWeek.json" class="button"> <i class="fa fa-github"></i>Go to the data</a></li>
</ul>



</div>


<!-- Scripts -->
<script src="assets/js/jquery.min.js"></script>
<script type="text/javascript">
  var bg = Math.floor((Math.random() * 51) + 1);
  $('#header').css('background-image', "url('assets/css/images/overlay.png'), url('images/bg_es/"+bg+".jpg')");
</script>
<script src="assets/js/jquery.poptrox.min.js"></script>
<script src="assets/js/skel.min.js"></script>
<script src="assets/js/util.js"></script>
<!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
<script src="assets/js/main.js"></script>

<script src="assets/js/chart.min.js"></script>


<script>
var char;

$(document).ready(function(){
  var cityName;
  var dates;
  var dataset = [];

  var max_cities = 5;

  var position=1;

  $.getJSON( "https://raw.githubusercontent.com/iblancasa/GitHub-DataProcessed-Spain/master/contributionsWeek.json",
    function( data ) {
      for(i = 0; i < data.length; i++ ){
        cityName = data[i][0];
        date = data[i][1][0];
        date = Object.keys(date)[0];
        position = i+1;

        $("#contributions").
          append("<tr><td>"+position+"</td><td>"+cityName+"</td><td>"+data[i][1][0][date]+"</td></tr>");
      }

      var labels = [];

      for (i = 0; i< data[0][1].length; i++){
         labels.push(Object.keys(data[0][1][i]));
      }

      var data_Contrib=[];


      var color;

      for (i = 0; i<max_cities;i++){
        color = "";

        for (var k = 0; k < 3; k++ ) {
            color += Math.floor(Math.random() * 255);
            color +=","
        }
        for(var contrib in data[i][1]){
          for(var c in data[i][1][contrib]){
            data_Contrib.push(data[i][1][contrib][c]);
          }
        }
        console.log(color);

        data_Contrib = data_Contrib.reverse();

        dataset.push({
            label: data[i][0],
            fillColor: "rgba("+color+"0.2)",
            strokeColor: "rgba("+color+"1)",
            pointColor: "rgba("+color+"1)",
            pointStrokeColor: "#fff",
            pointHighlightFill: "#fff",
            pointHighlightStroke: "rgba(220,220,220,1)",
            data: data_Contrib
        });

        $("#legend").
          append("<tr><td style='background-color:rgba("+color+"1);'></td><td>"+data[i][0]+"</td></tr>");

        data_Contrib=[];
      }


      var data = {
            labels: labels.reverse(),
            datasets: dataset
        };



        var options = {
                scaleShowGridLines : true,
                scaleGridLineColor : "rgba(0,0,0,.05)",
                scaleGridLineWidth : 1,
                scaleShowHorizontalLines: true,
                scaleShowVerticalLines: true,
                bezierCurve : true,
                bezierCurveTension : 0.4,
                pointDot : true,
                pointDotRadius : 4,
                pointDotStrokeWidth : 1,
                pointHitDetectionRadius : 20,
                datasetStroke : true,
                datasetStrokeWidth : 2,
                datasetFill : true,

            };
        // Get context with jQuery - using jQuery's .get() method.
        var ctx = $("#char").get(0).getContext("2d");

        char = new Chart(ctx).Line(data, options);


    });

});

</script>


</body>
</html>

